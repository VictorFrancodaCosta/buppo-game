<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BUPPO - Jogo de Cartas</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&family=Montserrat:wght@400;600;800;900&family=Bangers&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="loading-screen">
        <div class="loader-title">BUPPO</div>
        <div class="loader-bar-bg"><div class="loader-bar-fill" id="loader-fill"></div></div>
        <div class="loader-txt">CARREGANDO RECURSOS...</div>
    </div>

    <div id="transition-overlay">
        <img src="https://i.ibb.co/60tCyntQ/BUPPO-LOGO-Copiar.png" class="trans-logo">
        <div class="trans-text">PREPARANDO BATALHA...</div>
    </div>

    <div id="game-background"></div>
    
    <div id="ambient-particles"></div>
    <div class="overlay-fx dmg-fx" id="dmg-overlay"></div>
    <div class="overlay-fx heal-fx" id="heal-overlay"></div>
    <div class="overlay-fx block-fx" id="block-overlay"></div>
    <div class="overlay-fx crit-fx" id="crit-overlay">CR√çTICO!</div>

    <div class="screen active" id="start-screen">
        <img src="https://i.ibb.co/60tCyntQ/BUPPO-LOGO-Copiar.png" class="logo-main floating-logo">
        <button class="main-btn" onclick="googleLogin()">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="google-icon">
            <span id="btn-text">LOGIN COM GOOGLE</span>
        </button>
        <div class="version-tag">BETA v2.0</div>
    </div>

    <div class="screen" id="lobby-screen">
        <div id="lobby-particles"></div>
        
        <div class="lobby-header">
            <div class="user-profile">
                <div class="avatar-circle" id="lobby-avatar"></div>
                <div class="user-details">
                    <h2 id="lobby-username">JOGADOR</h2>
                    <p id="lobby-stats">VIT√ìRIAS: 0 | PONTOS: 0</p>
                </div>
            </div>
            <div class="lobby-actions">
                <button class="circle-btn" onclick="handleLogout()" title="Sair">
                    <svg viewBox="0 0 24 24" style="width:20px;height:20px;fill:white;"><path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>
                </button>
            </div>
        </div>

        <div class="lobby-content">
            <div class="ranking-panel">
                <h3>RANKING GLOBAL</h3>
                <div class="ranking-list" id="ranking-content">
                    <p style="text-align:center; opacity:0.6;">Carregando...</p>
                </div>
            </div>
            
            <div class="main-actions">
                <div class="poster-container">
                    <img src="https://i.ibb.co/zHZsCnyB/QUADRO-DO-SAGU-O.png" class="poster-frame">
                    <button class="play-btn-large" onclick="openDeckSelector()">JOGAR AGORA</button>
                </div>
            </div>
        </div>
    </div>

    <div class="screen" id="deck-selection-screen">
        <div class="deck-select-container">
            <h2 class="select-title">ESCOLHA SEU ESTILO</h2>
            <div class="deck-options">
                <div class="deck-option" onclick="selectDeck('knight')" data-name="CAVALEIRO">
                    <img src="https://i.ibb.co/fzr36qbR/SELE-O-DE-DECK-CAVALEIRO.png">
                </div>
                <div class="deck-option" onclick="selectDeck('mage')" data-name="MAGO">
                    <img src="https://i.ibb.co/bjBcKN6c/SELE-O-DE-DECK-MAGO.png">
                </div>
            </div>
            <button class="return-btn" onclick="showScreen('lobby-screen')">VOLTAR</button>
        </div>
    </div>

    <div class="screen" id="game-screen">
        <div class="game-header">
            <div class="header-left">
                <button class="circle-btn" id="btn-config-toggle" title="Configura√ß√µes">‚öôÔ∏è</button>
                <button class="circle-btn" id="btn-sound" title="Som">üîä</button>
            </div>
            <button class="danger-btn" id="btn-surrender" onclick="abandonMatch()">ABANDONAR</button>
        </div>

        <div id="config-panel">
            <h3>CONFIGURA√á√ïES</h3>
            <div class="cfg-row">
                <span>Volume Geral</span>
                <input type="range" min="0" max="1" step="0.1" value="1" oninput="updateVol('master', this.value)">
            </div>
            <button class="mini-btn" onclick="toggleFullScreen()">TELA CHEIA</button>
            <button class="mini-btn close-cfg" onclick="toggleConfig()">FECHAR</button>
        </div>

        <div id="end-screen">
            <h1 id="end-title">FIM DE JOGO</h1>
            <div class="end-actions">
                <button class="main-btn" onclick="restartMatch()">JOGAR NOVAMENTE</button>
                <button class="secondary-btn" onclick="transitionToLobby()">VOLTAR AO SAGU√ÉO</button>
            </div>
        </div>

        <div class="game-board">
            <div class="unit-area opponent-cluster">
                <div class="lvl-circle" id="m-lvl">1</div>
                <div class="unit-info">
                    <span class="unit-name">INIMIGO</span>
                    <div class="hp-tube"><div class="hp-liquid" id="m-hp-fill"></div><span class="hp-txt" id="m-hp-txt">6/6</span></div>
                    <div class="mastery-row" id="m-masteries"></div>
                </div>
            </div>
            <div class="xp-area top-xp" id="m-xp"></div>
            <div id="m-deck-container">
                <img src="https://i.ibb.co/jdZmTHC/CARDBACK.png" alt="Deck" id="m-deck-img">
                <div class="deck-count" id="m-deck-count">30</div>
            </div>

            <div class="unit-area player-cluster">
                <div class="lvl-circle" id="p-lvl">1</div>
                <div class="unit-info">
                    <span class="unit-name" style="color:var(--accent-blue)">VOC√ä</span>
                    <div class="hp-tube"><div class="hp-liquid" id="p-hp-fill" style="background: #00cec9;"></div><span class="hp-txt" id="p-hp-txt">6/6</span></div>
                    <div class="mastery-row" id="p-masteries"></div>
                </div>
            </div>
            <div class="xp-area" id="p-xp"></div>
            <div id="p-deck-container">
                <img src="https://i.ibb.co/wh3J5mTT/DECK-CAVALEIRO.png" alt="Deck" id="p-deck-img">
                <div class="deck-count" id="p-deck-count">30</div>
            </div>

            <div class="middle-area">
                <div class="turn-display" id="turn-txt">TURNO 1</div>
                <div class="slot" id="p-slot"></div>
                <div class="slot" id="m-slot"></div>
            </div>

            <div class="hand-wrapper" id="player-hand"></div>
        </div>
    </div>

    <div id="tooltip-box"><h3 id="tt-title"></h3><div id="tt-content"></div></div>
    
    <div id="modal-overlay">
        <div class="modal-box">
            <h3 id="modal-title">ESCOLHA</h3>
            <p id="modal-desc">...</p>
            <div id="modal-btns"></div>
            <button class="mini-btn close-modal" onclick="cancelModal()">CANCELAR</button>
        </div>
    </div>

    <button id="btn-fullscreen" onclick="toggleFullScreen()" title="Tela Cheia">‚õ∂</button>

    <script type="module" src="js/data.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>
