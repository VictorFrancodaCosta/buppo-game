/* ARQUIVO: css/style.css */

/* IMPORTANTE: FONTES */
@import url('https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Bangers&display=swap');

:root {
    --bg-app: #050505;
    --txt-primary: #ecf0f1; --txt-secondary: #d7ccc8;
    --accent-blue: #00cec9; --accent-red: #ff7675;
    --gold: #ffd700;
    --wood-dark: #3e2723;
    --wood-light: #5d4037;
    --beige-dark: #3e3223;
    --purple-btn: #8e44ad;
}

body { 
    font-family: 'Montserrat', sans-serif; background-color: var(--bg-app); 
    margin: 0; padding: 0; height: 100vh; overflow: hidden; user-select: none;
}

/* --- LEVEL UP ANIMATION --- */
.player-cluster, .opponent-cluster {
    position: relative !important; 
}

.levelup-text {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    font-family: 'Bangers', cursive;
    font-size: 3.5rem;
    color: #FFD700;
    white-space: nowrap;
    pointer-events: none;
    z-index: 999;
    -webkit-text-stroke: 1.5px black;
    text-shadow: 4px 4px 0px #000;
}

.lvl-anim-up {
    bottom: 80%;
    animation: floatLevelUp 2s ease-out forwards;
}

.lvl-anim-down {
    top: 80%;
    animation: floatLevelDown 2s ease-out forwards;
}

@keyframes floatLevelUp {
    0% { opacity: 0; transform: translateX(-50%) translateY(20px) scale(0.5); }
    15% { opacity: 1; transform: translateX(-50%) translateY(-10px) scale(1.2); }
    30% { transform: translateX(-50%) translateY(-20px) scale(1); }
    100% { opacity: 0; transform: translateX(-50%) translateY(-100px) scale(1); }
}

@keyframes floatLevelDown {
    0% { opacity: 0; transform: translateX(-50%) translateY(-20px) scale(0.5); }
    15% { opacity: 1; transform: translateX(-50%) translateY(10px) scale(1.2); }
    30% { transform: translateX(-50%) translateY(20px) scale(1); }
    100% { opacity: 0; transform: translateX(-50%) translateY(100px) scale(1); }
}

/* --- FUNDO PRINCIPAL --- */
#game-background {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-image: url('https://i.ibb.co/KzVqKR6D/MESA-DE-JOGO.png');
    background-size: cover; background-position: center;
    transition: filter 0.8s ease, transform 0.8s; z-index: -1;
}
#game-background.lobby-mode {
    background-image: url('https://i.ibb.co/Dfpkhhtr/ARTE-SAGU-O.png');
    filter: brightness(0.9);
}

/* --- PRELOADER --- */
#loading-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: #111; z-index: 9999; display: flex;
    flex-direction: column; justify-content: center; align-items: center;
    transition: opacity 0.5s;
}
.loader-title { font-family: 'MedievalSharp', cursive; font-size: 3rem; color: var(--gold); margin-bottom: 20px; }
.loader-bar-bg { width: 300px; height: 10px; background: #333; border-radius: 5px; overflow: hidden; }
.loader-bar-fill { height: 100%; width: 0%; background: var(--gold); transition: width 0.2s; }
.loader-txt { margin-top: 10px; font-size: 0.8rem; color: #777; }

/* --- TELAS --- */
.screen {
    display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0;
    flex-direction: column; opacity: 0; transition: opacity 0.5s; pointer-events: none;
}
.screen.active { display: flex; opacity: 1; pointer-events: all; }

/* --- HAND WRAPPER (CARTAS) --- */
.hand-wrapper {
    position: absolute; bottom: 5%; left: 50%; transform: translateX(-50%);
    display: flex; gap: -20px; height: 160px; align-items: flex-end;
    perspective: 1000px; width: 90%; justify-content: center;
    z-index: 50; /* Traz as cartas para frente */
}

/* ANIMAÇÃO DE ENTRADA DAS CARTAS */
.intro-anim {
    animation: introBounce 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes introBounce {
    0% { opacity: 0; transform: translateY(150px) scale(0.5); }
    60% { opacity: 1; transform: translateY(-20px) scale(1.1); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

.hand-card {
    width: 105px; height: 150px;
    background-size: cover; border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    transition: transform 0.2s ease, margin 0.2s;
    cursor: pointer; position: relative; overflow: hidden;
    margin-right: -40px; transform-origin: bottom center;
    background-color: #222;
    border: 2px solid #444;
}
.hand-card:hover { z-index: 10; margin-right: 15px; margin-left: 15px; }
.hand-card.border-red { border-color: var(--accent-red); }
.hand-card.border-blue { border-color: var(--accent-blue); }
.hand-card.border-green { border-color: #2ecc71; }
.hand-card.border-yellow { border-color: #f1c40f; }
.hand-card.border-purple { border-color: #9b59b6; }

/* Mobile Adjusts */
@media (max-width: 768px) {
    .hand-card { width: 84px; height: 120px; margin-right: -35px; }
}

/* --- OVERLAYS --- */
.overlay-fx {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none; opacity: 0; transition: opacity 0.2s; z-index: 800;
}
.dmg-fx { background: radial-gradient(circle, transparent 50%, rgba(255,0,0,0.4) 90%); }
.heal-fx { background: radial-gradient(circle, transparent 50%, rgba(46,204,113,0.3) 90%); }
.block-fx { background: radial-gradient(circle, transparent 50%, rgba(52,152,219,0.3) 90%); }
.crit-fx {
    display: flex; justify-content: center; align-items: center;
    font-family: 'Bangers', cursive; font-size: 5rem; color: #ffeb3b;
    text-shadow: 4px 4px #e74c3c; transform: scale(0);
    transition: transform 0.1s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.2s;
}
#crit-overlay[style*="opacity: 1"] { transform: scale(1.2); }

/* --- UI ELEMENTS --- */
.circle-btn {
    width: 45px; height: 45px; border-radius: 50%; border: 2px solid rgba(255,255,255,0.2);
    background: rgba(0,0,0,0.5); color: white; font-size: 1.2rem; cursor: pointer;
    transition: all 0.2s; display: flex; justify-content: center; align-items: center;
}
.circle-btn:hover { background: var(--accent-blue); border-color: white; transform: scale(1.1); }

.main-btn, .secondary-btn, .danger-btn, .play-btn-large, .return-btn {
    padding: 12px 30px; font-family: 'Russo One', sans-serif; border: none; cursor: pointer;
    text-transform: uppercase; letter-spacing: 1px; transition: transform 0.1s, filter 0.2s;
    display: flex; align-items: center; justify-content: center; gap: 10px;
}
.main-btn { background: var(--accent-blue); color: #000; clip-path: polygon(10% 0, 100% 0, 100% 90%, 90% 100%, 0 100%, 0 10%); }
.main-btn:hover { filter: brightness(1.2); transform: translateY(-2px); }
.danger-btn { background: var(--accent-red); color: white; clip-path: polygon(10% 0, 100% 0, 100% 90%, 90% 100%, 0 100%, 0 10%); }
.secondary-btn { background: transparent; border: 2px solid white; color: white; }

/* --- LOBBY --- */
.lobby-header {
    position: absolute; top: 0; left: 0; width: 100%; padding: 20px; box-sizing: border-box;
    display: flex; justify-content: space-between; align-items: flex-start; z-index: 10;
}
.user-profile { display: flex; align-items: center; gap: 15px; background: rgba(0,0,0,0.6); padding: 10px 20px; border-radius: 50px; border: 1px solid rgba(255,255,255,0.1); }
.avatar-circle { width: 50px; height: 50px; background: #555; border-radius: 50%; background-image: url('https://i.ibb.co/wh3J5mTT/DECK-CAVALEIRO.png'); background-size: cover; border: 2px solid var(--accent-blue); }
.user-details h2 { margin: 0; font-size: 1.2rem; color: var(--accent-blue); font-family: 'Russo One', sans-serif; }
.user-details p { margin: 0; font-size: 0.8rem; color: #aaa; }

.lobby-content {
    display: flex; height: 100%; padding-top: 100px; box-sizing: border-box;
    justify-content: center; align-items: center; gap: 50px; position: relative; z-index: 5;
}
.ranking-panel {
    width: 300px; height: 60%; background: rgba(0,0,0,0.7); border: 1px solid rgba(255,255,255,0.1);
    border-radius: 10px; padding: 20px; display: flex; flex-direction: column;
}
.ranking-panel h3 { text-align: center; color: var(--gold); border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px; margin-top: 0; }
.ranking-list { flex: 1; overflow-y: auto; font-size: 0.9rem; }
.ranking-list table { width: 100%; border-collapse: collapse; }
.ranking-list td, .ranking-list th { padding: 8px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.05); }
.rank-1 { color: #ffd700; font-weight: bold; }
.rank-2 { color: #c0c0c0; }
.rank-3 { color: #cd7f32; }

.poster-container { position: relative; width: 300px; text-align: center; transition: transform 0.3s; }
.poster-container:hover { transform: scale(1.05); }
.poster-frame { width: 100%; display: block; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.8)); }
.play-btn-large {
    position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%);
    width: 80%; font-size: 1.2rem; background: linear-gradient(45deg, #e67e22, #f39c12);
    box-shadow: 0 0 20px rgba(230, 126, 34, 0.6);
}

/* --- DECK SELECTION --- */
.deck-select-container {
    display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;
    background: rgba(0,0,0,0.85); gap: 30px;
}
.select-title { font-family: 'Russo One'; font-size: 2.5rem; color: var(--gold); margin-bottom: 20px; }
.deck-options { display: flex; gap: 50px; }
.deck-option {
    width: 220px; cursor: pointer; transition: all 0.3s ease; position: relative;
}
.deck-option img { width: 100%; border-radius: 15px; filter: grayscale(60%); transition: all 0.3s; }
.deck-option:hover { transform: scale(1.1) translateY(-10px); }
.deck-option:hover img { filter: grayscale(0%) brightness(1.1); box-shadow: 0 0 30px var(--gold); }
.deck-option::after {
    content: attr(data-name); position: absolute; top: 105%; left: 50%; transform: translateX(-50%);
    font-family: 'Russo One'; color: white; opacity: 0; transition: opacity 0.3s;
}
.deck-option:hover::after { opacity: 1; }

/* --- GAME BOARD (Simplificado) --- */
.game-board { width: 100%; height: 100%; position: relative; }
.unit-area {
    position: absolute; display: flex; align-items: center; gap: 15px;
    background: rgba(0,0,0,0.6); padding: 10px 20px; border-radius: 50px;
    border: 1px solid rgba(255,255,255,0.1);
}
.player-cluster { bottom: 20px; left: 20px; }
.opponent-cluster { top: 20px; right: 20px; flex-direction: row-reverse; }

.lvl-circle {
    width: 50px; height: 50px; border-radius: 50%; background: #333;
    display: flex; justify-content: center; align-items: center;
    font-family: 'Russo One'; font-size: 1.5rem; color: white;
    border: 3px solid var(--gold);
}
.hp-tube { width: 150px; height: 12px; background: #222; border-radius: 6px; overflow: hidden; position: relative; margin-top: 5px; }
.hp-liquid { width: 100%; height: 100%; background: var(--accent-red); transition: width 0.5s; }
.hp-txt { position: absolute; top: -18px; right: 0; font-size: 0.8rem; color: #fff; }
.unit-name { font-family: 'Russo One'; font-size: 1.1rem; color: var(--accent-red); }

#p-deck-container, #m-deck-container { position: absolute; width: 80px; }
#p-deck-container { bottom: 20px; right: 20px; }
#m-deck-container { top: 20px; left: 20px; }
.deck-count {
    position: absolute; bottom: -10px; right: -10px;
    background: #333; color: white; width: 25px; height: 25px;
    border-radius: 50%; display: flex; justify-content: center; align-items: center;
    font-size: 0.8rem; border: 1px solid #777;
}
#p-deck-img, #m-deck-img { width: 100%; border-radius: 5px; box-shadow: 5px 5px 15px rgba(0,0,0,0.5); }

.middle-area {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    display: flex; flex-direction: column; align-items: center; gap: 20px;
}
.slot {
    width: 110px; height: 150px; border: 2px dashed rgba(255,255,255,0.1);
    border-radius: 8px; display: flex; justify-content: center; align-items: center;
}
.turn-display {
    font-family: 'Russo One'; font-size: 2rem; color: white; letter-spacing: 5px;
    text-shadow: 0 0 10px rgba(0,0,0,0.5); margin-bottom: 10px;
}

/* XP AREAS */
.xp-area {
    position: absolute; display: flex; flex-wrap: wrap; gap: 5px; width: 160px;
}
#p-xp { bottom: 100px; left: 20px; }
.top-xp { top: 100px; right: 20px; justify-content: flex-end; }
.xp-mini { width: 30px; height: 42px; background-size: cover; border-radius: 3px; border: 1px solid #555; }

/* UTILS */
#transition-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: #000; z-index: 5000; display: flex; flex-direction: column;
    justify-content: center; align-items: center; opacity: 0; pointer-events: none;
    transition: opacity 0.5s;
}
#transition-overlay.active { opacity: 1; pointer-events: all; }
.trans-logo { width: 150px; margin-bottom: 20px; animation: pulse 1s infinite alternate; }
.trans-text { font-family: 'Russo One'; color: var(--gold); letter-spacing: 2px; }

#tooltip-box {
    position: fixed; background: rgba(20,20,20,0.95); border: 1px solid #444;
    padding: 15px; border-radius: 8px; width: 250px; pointer-events: none;
    z-index: 6000; display: none; box-shadow: 0 10px 30px rgba(0,0,0,0.8);
    backdrop-filter: blur(5px);
}
#tt-title { color: var(--gold); margin: 0 0 10px 0; font-family: 'Russo One'; font-size: 1.1rem; border-bottom: 1px solid #444; padding-bottom: 5px; }
.tt-label { font-size: 0.75rem; color: #888; text-transform: uppercase; display: block; margin-top: 5px; }
.tt-val { color: #fff; font-weight: bold; }

/* FX ANIMATIONS */
@keyframes pulse { from { transform: scale(1); } to { transform: scale(1.05); } }
.shake-screen { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
@keyframes shake { 10%, 90% { transform: translate3d(-2px, 0, 0); } 20%, 80% { transform: translate3d(4px, 0, 0); } }

/* Flying Card */
.flying-card {
    position: fixed; z-index: 1000; border-radius: 8px;
    background-size: cover; box-shadow: 0 10px 20px rgba(0,0,0,0.5);
    transition: all 0.5s ease-in-out; pointer-events: none;
    background-color: #222; border: 2px solid #555;
}
.card-art { width: 100%; height: 100%; background-size: cover; background-position: center; border-radius: 6px; }
.card-bounce { animation: cardLand 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
@keyframes cardLand { 0% { transform: scale(1.2); } 100% { transform: scale(1); } }

/* Level Up Flash */
.level-up-anim { animation: lvlFlash 0.8s; }
@keyframes lvlFlash { 0% { box-shadow: 0 0 0 0 rgba(255,215,0,0.7); transform: scale(1); } 50% { box-shadow: 0 0 50px 20px rgba(255,215,0,0); transform: scale(1.5); } 100% { transform: scale(1); } }

/* XP Fly Animation */
.xp-anim-clone {
    position: fixed; z-index: 2000; background-size: cover; border-radius: 3px; pointer-events: none;
    transition: all 0.8s ease-in;
}
.xp-fly-up { animation: flyUpAndFade 0.8s forwards; }
.xp-fly-down { animation: flyDownAndFade 0.8s forwards; }
@keyframes flyUpAndFade { to { transform: translateY(-100px) scale(1.5); opacity: 0; } }
@keyframes flyDownAndFade { to { transform: translateY(100px) scale(1.5); opacity: 0; } }

#btn-fullscreen { position: fixed; bottom: 20px; left: 20px; background: transparent; border: none; font-size: 2rem; color: rgba(255,255,255,0.3); cursor: pointer; z-index: 9000; }
#btn-fullscreen:hover { color: white; }
